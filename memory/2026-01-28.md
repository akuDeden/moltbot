# Memory - 2026-01-28

## Setup Moltbot âœ…
- Installed moltbot from GitHub source (`~/moltbot`)
- Completed onboarding wizard
- WhatsApp gateway connected and working
- Bot dapat terima dan reply pesan WhatsApp

## Test Bot
- Test simpan belanja via WhatsApp berhasil
- Bot simpan data ke memory file (bukan Google Sheet yet)
- lalu execute `add-belanja.py` script

## Belanja
- Laundry: Rp 30.000 (kering dan basah) 

## Aktivitas
- Standup 4 kali hari ini, capek

## Tiket Bug
- Bug: User tidak bisa login (2026-01-28)

## Browser Testing Integration âœ… (Updated 17:30)

**Discovered:** Moltbot has **powerful built-in browser tool** beyond just Chrome Extension!

**Two Modes:**
1. **Managed Browser (`clawd` profile)** â­ Recommended
   - Isolated, safe, auto-managed
   - No extension needed
   - Best for automated testing
2. **Chrome Extension (`chrome` profile)**
   - Control existing tabs
   - Best for manual testing

**Capabilities:**
- Navigate, snapshot (get refs), screenshot, PDF export
- Actions: click, type, drag, select, hover, wait
- Form fill, file upload, dialog handling
- State: cookies, storage, offline mode, headers
- Debug: console logs, errors, highlight elements

**Refs System:**
- Snapshot shows: `[ref=e12] button "Sign in"`
- Actions use refs: `moltbot browser click e12`

**Commands Example:**
```bash
moltbot browser --browser-profile clawd start
moltbot browser --browser-profile clawd navigate https://staging.chronicle.rip
moltbot browser --browser-profile clawd snapshot --interactive
moltbot browser --browser-profile clawd type e23 "test@example.com"
moltbot browser --browser-profile clawd click e14
moltbot browser --browser-profile clawd wait --url "**/dashboard"
moltbot browser --browser-profile clawd screenshot --full-page
```

**Documentation:**
- `docs/BROWSER-TESTING.md` - Setup guide (2 modes, security, troubleshooting)
- `docs/BROWSER-EXAMPLES.md` - 5 detailed scenarios:
  1. Login test (step-by-step)
  2. Bug reproduction (console errors + auto-ticket)
  3. Form validation (4 test cases)
  4. E2E checkout flow (multi-step)
  5. Performance testing (load time metrics)

**Persona Integration:**
- `persona/QA.md` - COMMAND 6: BROWSER TESTING
- Keywords: `test login`, `test browser`, `reproduce bug`, `test staging`

**Next Steps:**
1. Test managed browser: `moltbot browser --browser-profile clawd start`
2. Create `test-credentials.json` (gitignore'd)
3. Test via WhatsApp: "test login staging.chronicle.rip"

**Security:**
- Managed browser isolated
- Loopback-only (127.0.0.1)
- Test accounts only
- Never commit credentials

Browser automation ready production! ðŸš€

## Notion Database Integration âœ… (19:00-19:30)

**Problem:** Script-based approach was **not scalable** - separate scripts for each sprint (search-sprint1.py, search-sprint2.py, etc.)

**Solution:** Use modular `notion_reader/` structure:
- `list_all_pages.py --search "Sprint N"` - Works for ANY sprint number!
- `list_dev_tickets.py` - Queries dev database (32e29af7d7dd4df69310270de8830d1a)
- `list_bug_tickets.py` - Queries bug database (482be0a206b044d99fff5798db2381e4)
- `clawbot_ticket_reader.py` - Read full ticket with content

**Files Updated:**
- `CONTEXT.md` - Reference notion_reader scripts instead of ad-hoc curl
- `persona/QA.md` - Commands 2 & 3 use structured scripts
- `TOOLS.md` - Quick reference for Notion commands

**Commits:**
- `0946b46` - Replace sprint-specific scripts with generic queries
- `4a0dc16` - Use modular notion_reader scripts
- `440dbb4` - Add Notion reference to TOOLS.md (removed hardcoded token for security)

**Key Learning:** Generic is better than specific! One script for all sprints > N scripts for N sprints

## Workspace Path Fix âœ… (19:30)

**Problem:** Bot masih write memory ke `/Users/ahmadfaris/clawd/memory/` (folder lama) instead of `/Users/ahmadfaris/moltbot-workspace/memory/`

**Root Cause:** `session-memory` hook di Moltbot core punya **hardcoded fallback** ke `~/clawd` kalau config tidak di-pass:
```typescript
const workspaceDir = cfg
  ? resolveAgentWorkspaceDir(cfg, agentId)  
  : path.join(os.homedir(), "clawd");  // <-- Fallback!
```

**Solution:** Buat symlink agar kedua path sync:
```bash
rm -rf /Users/ahmadfaris/clawd/memory
ln -s /Users/ahmadfaris/moltbot-workspace/memory /Users/ahmadfaris/clawd/memory
```

Sekarang write ke `clawd/memory/` otomatis masuk ke `moltbot-workspace/memory/` âœ…

**Config Status:**
- âœ… `agents.defaults.workspace`: `/Users/ahmadfaris/moltbot-workspace` (correct)
- âœ… Gateway restarted dan running (PID 77496)
- âœ… Symlink active: `clawd/memory -> moltbot-workspace/memory`

## Test Write
- Item test: Rp 10.000
